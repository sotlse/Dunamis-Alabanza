<!DOCTYPE html>
<html>
  <head>
  </head>
  <!--<body onload="load()">-->
    <body>
    <h2 class="tituloDelCanto">Mas el Dios de toda gracia</h2>
    <h3 class="autorDelCanto">Marcos Witt</h3>
    <div class="tempo">63</div>
    <div class="tono">A</div>
    <div class='canto_body'>  
<!---------------Este es el limite----->  
      <pre data-key="A">
INTRO:
div id="paper" style="overflow: hidden;">
/div>
div id="midi">
/div>
VERSO1:
            A         C#m7  F#m7
Mas el Dios   de toda gra - cia 
    E       D              D/E     
que nos llamo a su gloria eterna
E         F#m       |C#m7 - F#m7 E/G#|
os perfeccione y a - fir -- me
     A/D   D        E/D  E   
fortalez - ca y establez-ca
      
CORO1:
A/C#  D       C#m7  Bm7  A     A/C#
A     el se - a     la   glo - ria
    D          |A/C#  - F#m7 F#m7/E|
a a el sea el impe -  rio
        E/D  D           D/E  E
por los si - glos de los si - glos
 A    A/G     D/F#  D/E  E   D/A
amen,     a - men, amen  y a-men
|D/E - E|

VERSO2:
            A         E/F#  F#m7
Mas el Dios   de toda gra - cia 
    F#m7/E    D               D/E     
que nos lla - mo a su gloria eterna
E        E/F#       |C#m7 - F#m7 E|
os perfeccione y a - fir -- me
     E/D   D        D/E  E   
fortalez - ca y establez-ca
      
CORO2:
  A/C#  D       C#m7  Bm7  A     A/C#
//A     el se - a     la   glo - ria
C#m7  D          |C#m7 - F#m7 E|
a  a  el sea el impe  -  rio
        E/D  D           D/E  E
por los si - glos de los si - glos//
 A    A/G     D/F#   D/E  E   F
amen,     a - men, a-men  y a-men 
|Eb/F - F|

VERSO3:
            Bb         F/G  Gm7
Mas el Dios   de toda gra - cia 
         |Eb   -   Cm7|   |Eb/F - F|   
que nos llamo a su gloria eter -  na
         Gm         |Dm7 -  Gm7 F|
os perfeccione y a - fir -- me
     Bb/Eb  Eb       Eb/F  F   
fortalez -  ca y establez- ca

CORO3:
  Bb/D  Eb      Dm7   Cm7  Bb     Bb/D
//A     el se - a     la   glo - ria
Dm7   Eb         |Bb/D - Gm7 F|
a  a  el sea el impe  -  rio
        Eb               Eb/F  F
por los si - glos de los si -  glos//
    Bb   Bb/Ab     Eb/G   Eb/F  F  
//amen,       a - men, a-men   y//
  |Eb/Bb - Bb|
a -men
      </pre>
<!---------------Este es el limite-----> 
      </div>   

  <script type="text/javascript" src='/js/template-cancion-piano.js'></script>
  <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.4.0/jquery.min.js"></script>
  <script type="text/javascript" src="/js/jquery.transposer.js"></script>
  <script type="text/javascript">
      $(function() {
        $("pre").transpose();
      });
    </script>
  <script src="/script.js" defer></script>
  <!--http://www.lesession.co.uk/abc/abc_notation.htm-->
  <script src="/js/abcjs_midi_5.12.0-min.js" type="text/javascript"></script>
  <script type="text/javascript">
    var abcmidi = "T: Mas el Dios de toda gracia\n" +
      "C: Marcos Witt\n" +
      "M: 4/4\n" +
      "L: 1/16\n" +
      //"%%stretchlast .7\n" +
      'Q: 63\n' +
      "R: Rubato\n" +
      "%%staves {R L}\n" +
      "V:R clef=treble\n" +
      "V:L clef=bass\n" +
      "K: A\n" +
      '[V:R] z3 B,[B,C]8-[B,C]2EA | [B,EG]3B, EG[A,CF]2-[A,CF]8 | [A,DE]3A, [A,DEA]12 |\n' +
      "[V:L] z E,A,2 [E,A,]12 & A,,16 | F,,C,A,2 [F,,C,A,]12 | D,,A,,F,2 [D,,A,,F,]12 |"+

      '[V:R] [F,A,DE]8 [G,E]8 | [F,A,E]3A, EA3-A6 [B,EG]2 | [A,DF]4 [A,CE]3B, CE!fermata!A2 [B,CEA]4 |\n' +
      "[V:L] [E,,E,]16 | D,,A,,F,2 [D,,A,,F,]8-[D,,A,,F,]2C,2 | B,,4 A,,E,A,2 [A,,E,A,2]8|" +

      '[V:R] [B,CEA]3E Aedc A2 [EFA]4-[DFA]2| [A,DA]8 [B,EB]8 ||\n' +
      "[V:L] C,A,C2 [C,A,C]4 D,A,3-A,4 | [F,,D,]8 [G,,E,]8 ||";

      var abc2 = 
      //"T: Mas el Dios de toda gracia\n" +
      //"C: Marcos Witt\n" +
      "M: 4/4\n" +
      "L: 1/16\n" +
      //"%%stretchlast .7\n" +
      'Q: 63\n' +
      //"R: Rubato\n" +
      "%%staves {R L}\n" +
      "V:R clef=treble\n" +
      "V:L clef=bass\n" +
      "K: A\n" +
      '[V:R] "A" z3 B,[B,C]8-[B,C]2EA  | "E/F#" [B,EG]3B, EG[A,CF]2-"F#m"[A,CF]8 | "Dadd9" [A,DE]3A, [A,DEA]12 |\n' +
      "[V:L] z E,A,2 [E,A,]12 & A,,16 | F,,C,A,2 [F,,C,A,]12 | D,,A,,F,2 [D,,A,,F,]12 |"+

      '[V:R] "D/E"[F,A,DE]8 "E"[G,E]8 | "Dadd9" [F,A,E]3A, EA3-A6 "C#m7"[B,EG]2 | "Bm7"[A,DF]4 [A,CE]3B, CE!fermata!A2 [B,CEA]4 |\n' +
      "[V:L] [E,,E,]16 | D,,A,,F,2 [D,,A,,F,]8-[D,,A,,F,]2C,2 | B,,4 A,,E,A,2 [A,,E,A,2]8|" +

      '[V:R] "A/C#"[B,CEA]3E Aedc A2 [EFA]4-[DFA]2| "D/F#"[A,DA]8 "E/G#"[B,EB]8 ||\n' +
      "[V:L] C,A,C2 [C,A,C]4 D,A,3-A,4 | [F,,D,]8 [G,,E,]8 ||";

    window.onload = function() {
    //function load() {

      let transposeValue = JSON.parse(localStorage.getItem("VEXTABdeltaTono"));
      console.log(transposeValue);

        ABCJS.renderAbc("paper", abc2,{
          scale:1.1,
          //staffwidth: 745,
          responsive: "resize",
          paddingleft: 0,
          paddingright: 0,
          paddingbottom: 0,
          add_classes: true,
          visualTranspose: transposeValue,
        });
        ABCJS.renderMidi("midi", abcmidi,{
          midiTranspose: transposeValue,
          //animate: { listener: function(abcjsElement, currentEvent, context) {}, target: abc2, qpm: 120 },
        });
        document.getElementById("paper").querySelectorAll(".abcjs-chord").forEach((el) => {
          el.setAttribute("fill", "#2159D6");
          el.setAttribute("stroke", "#2159D6");
        });

      /*ABCJS.startAnimation("paper", abc2, {
        showCursor: true,
      });*/

      
      /*-----------------------------Transportar partitura-----------------------------*/
      var botonMas = document.querySelector(".botonTransportarMas");
      botonMas.addEventListener("click", function() {
        let transposeValue = JSON.parse(localStorage.getItem("VEXTABdeltaTono"));
        ABCJS.renderAbc("paper", abc2, {
          scale:1.1,
          responsive: "resize",
          paddingleft: 0,
          paddingright: 0,
          paddingbottom: 0,
          add_classes: true,
          visualTranspose: transposeValue,
        });
        ABCJS.renderMidi("midi", abcmidi,{
          midiTranspose: transposeValue,
        });
        document.getElementById("paper").querySelectorAll(".abcjs-chord").forEach((el) => {
              el.setAttribute("fill", "#2159D6");
              el.setAttribute("stroke", "#2159D6");
        });
      });

      var botonMas = document.querySelector(".botonTransportarMenos");
      botonMas.addEventListener("click", function() {
        let transposeValue = JSON.parse(localStorage.getItem("VEXTABdeltaTono"));
        ABCJS.renderAbc("paper", abc2, {
          scale:1.1,
          responsive: "resize",
          paddingleft: 0,
          paddingright: 0,
          paddingbottom: 0,
          add_classes: true,
          visualTranspose: transposeValue,
        });
        ABCJS.renderMidi("midi", abcmidi,{
          midiTranspose: transposeValue,
        });
        document.getElementById("paper").querySelectorAll(".abcjs-chord").forEach((el) => {
              el.setAttribute("fill", "#2159D6");
              el.setAttribute("stroke", "#2159D6");
        });
      });
    }
  </script>

  </body>
</html>
