 <!DOCTYPE html>
<html lang="en">
  <head>
    <title>Dunamis Adoracion</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!-- import the webpage's stylesheet -->
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
    
    <link rel='icon' href='https://cdn.glitch.com/4c1a86ab-31d9-449a-9f16-4378baabdc2c%2Ffavicon.ico?v=1580511400868' type='image/x-icon'/ >
    <link rel="manifest" href="/manifest.json">
  </head>  
  <body>
    <div class="encabezado">
      <div class="imagen-logo">
        <img class="logo" src="https://cdn.glitch.com/4c1a86ab-31d9-449a-9f16-4378baabdc2c%2FLogo_Dunamis.PNG?1557276609431">
      </div>
      <h2>Grupo de alabanza</h2>
    </div>
    <hr>
    <div style="margin:-10px 0 5px 0;">
      <p style="font-style: italic; text-align: center;">
        "Dios es Espíritu, y los que le adoran, en espíritu y en verdad es necesario que adoren."
      </p>
      <p style="margin:-20px 0 0 0;font-style: italic; text-align: right;">
        Juan 4:24
      </p>
    </div>

    <div class="cuerpo">

      <div>
        <p>
          Elige una playlist:
        </p>
      </div>
    
      <div>
        <ul style='font-size:large;'>
          <li> <a href="/html/domingo.html">Domingo</a></li>
          <li> <a href="/html/miercoles.html">Miercoles</a></li>
        </ul>
      </div>
    
      <p>
        Categorias de cantos:
      </p>
    
      <div>
        <ul style='font-size:large;margin:0 0 0 -15px;'>
          <li> <a href="/html/general.html">GENERAL</a></li>
        </ul>
        <ul style="list-style-type:circle;">
          <li> <a href="/html/adoracion.html">Adoracion</a></li>
          <li> <a href="/html/alabanza.html">Alabanza</a></li>
          <li> <a href="/html/confesion.html">Confesion</a></li>
          <li> <a href="/html/evangelismo.html">Evangelismo</a></li>
          <li> <a href="/html/servicio.html">Servicio</a></li>
          <li> <a href="/html/unidad.html">Unidad</a></li>
          <li> <a href="/html/oracion.html">Oracion</a></li>
          <li> <a href="/html/fortaleza.html">Fortaleza</a></li>
          <li> <a href="/html/perdon.html">Perdon</a></li>
          <li> <a href="/html/accion_de_gracias.html">Accion de Gracias</a></li>
          <li> <a href="/html/semana_santa.html">Semana Santa</a></li>
          <li> <a href="/html/navidad.html">Navidad</a></li>
          <li> <a href="/html/himnos.html">Himnos</a></li>
          <li> <a href="/html/servicios_especiales.html">Servicios Especiales</a></li>
        </ul>
      </div>
    </div>
    <hr>
    <div class="pie">   
      <a href="/html/teoria.html"><i class="fas fa-book-open"></i></a>
      <a href="/html/versiculos.html"><i class="fas fa-bible"></i></a>
      <a href="/html/calendario.html"><i class="fas fa-calendar-alt"></i></a>
      <a href="/html/config.html"><i class="fas fa-cog"></i></a>
    </div>


        <!-- import the webpage's javascript file -->
    <!--<script src="/__/firebase/8.2.1/firebase-app.js"></script>
    <script src="/__/firebase/8.2.1/firebase-messaging.js"></script>
    <script src="/__/firebase/init.js"></script>-->
    
    
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <!--<script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-app.js"></script>-->
    <!--<script src="/js/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use https://firebase.google.com/docs/web/setup#available-libraries -->
    <!--<script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-analytics.js"></script>-->
    <!--<script src="/js/firebase-analytics.js"></script>-->
    <!--<script src="/js/firebase-auth.js"></script>
    <script src="/js/firebase-firestore.js"></script>
    <script src="/js/firebase-messaging.js"></script>
    
    <!--<script src="/init-firebase.js" defer></script>-->
    
    <script src="/__/firebase/8.2.1/firebase-app.js"></script>
    <script src="/__/firebase/8.2.1/firebase-firestore.js"></script>
    <script src="/__/firebase/8.2.1/firebase-messaging.js"></script>
    <script src="/__/firebase/8.2.1/firebase-database.js"></script>
    <script src="/__/firebase/init.js"></script>
    
    <!--<script src="/app.js"></script>-->

    <script>
      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      /*var firebaseConfig = {
        apiKey: "AIzaSyAwILbPRKHcMyf_bxJKm1BDpFutlhU-P10",
        //apiKey: process.env.API_KEY,
        authDomain: "dunamis-6affc.firebaseapp.com",
        projectId: "dunamis-6affc",
        storageBucket: "dunamis-6affc.appspot.com",
        messagingSenderId: "545249031636",
        appId: "1:545249031636:web:a0e35ca1bdc6aaad4f9241",
        measurementId: "G-0WXQ8DMC8H"
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);*/
      //firebase.analytics();
      
      //-------Variables
      const messaging = firebase.messaging();
      var database = firebase.database();
      var db = firebase.firestore();
      
      
      var CollectionNotificaciones = db.collection("Notificaciones");
      var id,doc,data;
      //var DocumentUsers = 'User';
      
      //-------Cloud Messaging
      // Add the public key
      /*messaging.getToken({vapidKey: 'BCDkfgdZcsNUNSxXOBX8ttMcS9rpvV8WEoCmCrLV3cc4C9fFiyP3xsSzcjL3ngDLKMBH8B7vOmPl3QLxm2h1DME'});
      //messaging.getToken({vapidKey: process.env.VAPID_KEY});

      messaging.requestPermission()
            .then(function () {
                console.log("Notification Permission");
                return messaging.getToken();
            })
            .then(function (token) {
                console.log("Token: " + token);
                CollectionNotificaciones.get().then(function(querySnapshot) {
                    var flag=false;
                    querySnapshot.forEach(function(doc) {
                        data = doc.data();
                        console.log(doc.id, " => ", data.token);
                        if (data.token === token)
                          flag = true;
                    });
                    if (flag === false)
                      writeUserToken(token);
                      
                });
                
                
            })
            .catch(function (reason) {
                console.log(reason);
            });*/
      
      messaging.getToken({ vapidKey: 'BCDkfgdZcsNUNSxXOBX8ttMcS9rpvV8WEoCmCrLV3cc4C9fFiyP3xsSzcjL3ngDLKMBH8B7vOmPl3QLxm2h1DME' }).then((currentToken) => {
        if (currentToken) {
            console.log(currentToken);
          // Send the token to your server and update the UI if necessary
          // ...
        } else {
          // Show permission request UI
          console.log('No registration token available. Request permission to generate one.');
          // ...
        }
      }).catch((err) => {
        console.log('An error occurred while retrieving token. ', err);
        // ...
      });

      
      //-------Realtime database
      /*function writeUserData(thetoken) {
        alert(thetoken);
        firebase.database().ref('users/').set({
        //firebase.database().ref().child().set({
          token: thetoken
        });
      }*/
      
      //-------Firestore
     // function writeUserToken(thetoken){ 
        /*CollectionNotificaciones.get().then(function(querySnapshot) {      
          //console.log(querySnapshot.size); 
          console.log(querySnapshot.docs.length);
          //id = querySnapshot.docs.length + 1;
          //str = DocumentUsers.concat(id);
        });*/
        /*CollectionNotificaciones.add({
          token: thetoken
        })
        .then(function() {
            console.log("Document successfully written!");
        })
        .catch(function(error) {
            console.error("Error writing document: ", error);
        });
        
        
      }*/
      
    </script>
    
    <script src="/script.js" defer></script>
    
  </body>
</html>
 